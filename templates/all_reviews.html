<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>ëª¨ë“  ë¦¬ë·° ë³´ê¸°</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <!-- Home ë²„íŠ¼ -->
    <a href="/" class="home-button">Home</a>
    <header style="margin-bottom: 30px;">
        <h1>ë¦¬ë·° ëª¨ì•„ë³´ê¸° ğŸ’¬</h1>

    </header>

    <form method="get" action="{{ url_for('all_reviews') }}">
        <label for="movie">ì˜í™” ì´ë¦„:</label>
        <input type="text" id="movie" name="movie" value="{{ search_movie }}">

        <label for="user">ìœ ì € ì´ë¦„:</label>
        <input type="text" id="user" name="user" value="{{ search_user }}">

        <label for="sort">ì •ë ¬ ê¸°ì¤€:</label>
        <select id="sort" name="sort">
            <option value="date" {% if sort_by=='date' %}selected{% endif %}>ë‚ ì§œë³„</option>
            <option value="movie" {% if sort_by=='movie' %}selected{% endif %}>ì˜í™” ì´ë¦„ë³„</option>
            <option value="user" {% if sort_by=='user' %}selected{% endif %}>ìœ ì € ì´ë¦„ë³„</option>
        </select>

        <button type="submit">ê²€ìƒ‰</button>
    </form>

    <main>
        {% if reviews %}
        <table class="review-table">
            <thead>
                <tr>
                    <th>Movie Title</th>
                    <th>Comment</th>
                    <th>Review Date</th>
                    <th>Watched Date</th>
                    <th>User</th>
                    <th>rating</th>
                </tr>
            </thead>
            <tbody>
                {% for review in reviews %}
                <tr>
                    <td>{{ review['movie_title'] }}</td>
                    <td>{{ review['comment'] }}</td>
                    <td>{{ review['reviewDate'] }}</td>
                    <td>{{ review['watchedDate'] }}</td>
                    <td>{{ review['user_name'] }}</td>
                    <<td>{{ review['rating'] }} / 10</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
        <div class="pagination">
            {% if page > 1 %}
            <a
                href="{{ url_for('all_reviews', page=page-1, movie=search_movie, user=search_user, sort=sort_by) }}">Previous</a>
            {% endif %}
            <span>Page {{ page }} of {{ total_pages }}</span>
            {% if page < total_pages %} <a
                href="{{ url_for('all_reviews', page=page+1, movie=search_movie, user=search_user, sort=sort_by) }}">
                Next</a>
                {% endif %}
        </div>

        {% else %}
        <p>ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤. ğŸ˜¢</p>
        {% endif %}
    </main>
</body>

</html>